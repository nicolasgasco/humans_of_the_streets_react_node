(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports={"animated-title":"AnimatedLogo_animated-title__36ADy","text-top":"AnimatedLogo_text-top__2uRVs",showTopText:"AnimatedLogo_showTopText__3r7Js","text-bottom":"AnimatedLogo_text-bottom__3Si26",showBottomText:"AnimatedLogo_showBottomText__1R0G_","of-the-span":"AnimatedLogo_of-the-span__19ipu","read-stories-sub":"AnimatedLogo_read-stories-sub__1YOkB","main-text":"AnimatedLogo_main-text__OB1Ft"}},function(e,t,n){e.exports={modal:"UserMessage_modal__27XK6","modal-content":"UserMessage_modal-content__2AuH2","modal-text":"UserMessage_modal-text__2u3ec","modal-button":"UserMessage_modal-button__1xvQ7","button-container":"UserMessage_button-container__3QHSD","left-button":"UserMessage_left-button__1stIu"}},,function(e,t,n){e.exports={"carousel-container":"StoriesSlideshow_carousel-container__2N4EA","carousel-caption":"StoriesSlideshow_carousel-caption__3VYTe","carousel-img":"StoriesSlideshow_carousel-img__3QG_p"}},,function(e,t,n){e.exports={"personal-data-container":"ShowPersonalData_personal-data-container__3IOh9","show-data-button":"ShowPersonalData_show-data-button__oj5ab","profile-forms":"ShowPersonalData_profile-forms__3-k7I"}},,,,,,function(e,t,n){e.exports={"accordion-header":"AccordionProfile_accordion-header__3dm8F","accordion-title":"AccordionProfile_accordion-title__2LcYI"}},,,,,,,,function(e,t,n){e.exports={"user-pane":"UserPane_user-pane__17fhZ","style-six":"UserPane_style-six__tvOXM"}},function(e,t,n){e.exports={"profile-nav":"ProfileNav_profile-nav__3xPce","accented-button":"ProfileNav_accented-button__3Jhu1"}},function(e,t,n){e.exports={"show-data-button":"ConfirmCancelButtons_show-data-button__8pWsf"}},,,function(e,t,n){e.exports={"main-logo":"MainLogo_main-logo__Ezz2d",wrapper:"MainLogo_wrapper__3a_dV","typing-demo":"MainLogo_typing-demo__19WlV",typing:"MainLogo_typing__KGnyG",blink:"MainLogo_blink__1zUxH"}},function(e,t,n){e.exports={"user-icon":"UserIcon_user-icon__3BXc0"}},function(e,t,n){e.exports={"white-button":"WhiteButton_white-button__1zVyC"}},function(e,t,n){e.exports={"dark-button":"DarkButton_dark-button__3Eond"}},function(e,t,n){e.exports={"grid-item":"CardWrapper_grid-item__3mTvo"}},,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(20),o=n.n(r),a=(n(49),n(50),n(3)),i=n(9),l=n(6),u=(n(51),n(0));var d=function(){return Object(u.jsxs)("footer",{className:"footer",children:[Object(u.jsxs)("div",{className:"pictures-icon-credits",children:[Object(u.jsxs)("small",{children:["Picture by"," ",Object(u.jsx)("a",{href:"https://www.pexels.com/es-es/@harrisonhaines?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels",target:"_blank",rel:"noreferrer",children:"Harrison Haines"})," ","on"," ",Object(u.jsx)("a",{href:"https://www.pexels.com/",target:"_blank",rel:"noreferrer",children:"Pexels"}),"."]}),Object(u.jsxs)("small",{children:["Icons by"," ",Object(u.jsx)("a",{href:"https://www.flaticon.es/",target:"_blank",rel:"noreferrer",children:"Flaticon"}),"."]})]}),Object(u.jsx)("small",{className:"made-by",children:"Made by Nicolas Gasco."})]})},j=(n(53),function(e){return Object(u.jsxs)("nav",{className:"main-nav",children:[Object(u.jsx)(i.b,{to:"/browse/",children:Object(u.jsx)("div",{children:"Browse"})}),e.session?Object(u.jsx)(i.b,{to:"/profile/",children:Object(u.jsx)("div",{children:"Profile"})}):Object(u.jsx)("button",{onClick:e.toggleLoginFormVisibility,children:"Login"})]})}),b=(n(59),n(16)),h=n.n(b),m=function(){return window.onorientationchange=function(){switch(window.orientation){case 0:case 90:case-90:window.location.reload();break;default:return}},Object(u.jsxs)("div",{className:h.a["animated-title"],children:[Object(u.jsx)("div",{className:h.a["text-top"],children:Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:h.a["main-text"],children:"Humans"}),Object(u.jsxs)("span",{className:h.a["main-text"],children:[Object(u.jsx)("span",{className:h.a["of-the-span"],children:"of the"})," Streets"]})]})}),Object(u.jsx)("div",{className:h.a["text-bottom"],children:Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:h.a["read-stories-sub"],children:"Read their stories..."})})})]})},O=function(e){return Object(s.useEffect)((function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}),[]),window.innerWidth,Object(u.jsxs)("header",{className:"main-header",children:[Object(u.jsx)("div",{className:"picture-container",children:Object(u.jsx)(m,{})}),Object(u.jsx)(j,{session:e.session,toggleLoginFormVisibility:e.toggleLoginFormVisibility})]})},x=n(40),f=n.n(x),p=function(){return Object(u.jsx)("div",{children:Object(u.jsx)(i.b,{to:"/",children:Object(u.jsxs)("h1",{className:f.a["main-logo"],children:["Humans ",Object(u.jsx)("span",{children:"of"}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:"the"})," Streets"]})})})},g=n(41),y=n.n(g),v=function(e){return e.session?Object(u.jsx)("button",{onClick:e.toggleUserPaneVisibility,className:y.a["user-icon"]}):null},w=(n(60),function(e){return Object(u.jsxs)("div",{className:"slim-header",children:[Object(u.jsx)(p,{}),Object(u.jsx)(v,{toggleUserPaneVisibility:e.toggleUserPaneVisibility,session:e.session})]})}),_=n(23),C=(n(61),n(42)),N=n.n(C),S=function(e){return Object(u.jsx)("button",{type:e.type,onClick:e.onClick,className:"".concat(N.a["white-button"]," ").concat(e.className),children:e.text})},P=function(e){var t=Object(s.useState)({email:"",password:""}),n=Object(a.a)(t,2),c=n[0],r=n[1];return Object(u.jsxs)("div",{className:"login-container",children:[Object(u.jsxs)("form",{className:"login-form",onSubmit:function(t){t.preventDefault(),t.target.checkValidity(),fetch("/api/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){t.session?(e.handleModalMessage("Welcome back!"),r({email:"",password:""}),e.onLogin(!0),sessionStorage.setItem("user",t.user._id),e.toggleLoginFormVisibility()):(e.handleModalMessage("Wrong user or password!"),r({email:"",password:""}))})).catch((function(t){console.log("An error occurred: "+t.message),e.handleModalMessage("Something went wrong :( Try again.")}))},children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(u.jsx)("input",{type:"email",name:"username",id:"username",autoComplete:"email",required:!0,value:c.email,onChange:function(e){var t;t=e.target.value,r((function(e){return Object(_.a)(Object(_.a)({},e),{},{email:t.trim()})}))}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(u.jsx)("input",{type:"password",name:"password",id:"password",autoComplete:"current-password",required:!0,value:c.password,onChange:function(e){var t;t=e.target.value,r((function(e){return Object(_.a)(Object(_.a)({},e),{},{password:t})}))}})]})]}),Object(u.jsx)(S,{type:"submit",className:"login-button",text:"Login"})]}),Object(u.jsxs)("p",{className:"white-text",children:["Are you new?"," ",Object(u.jsx)("span",{onClick:e.toggleSignupFormVisibility,className:"signup-link",children:"Sign up"})," ","instead."]})]})},T=(n(62),function(e){var t=Object(s.useRef)(""),n=Object(s.useRef)(""),c=Object(s.useRef)(""),r=Object(s.useRef)(""),o=Object(s.useRef)(""),a=Object(s.useRef)("");return Object(u.jsx)("div",{className:"signup-container",children:Object(u.jsxs)("form",{className:"signup-form",onSubmit:function(s){s.preventDefault(),s.target.checkValidity(),r.current.value!==o.current.value?(e.handleModalMessage("The two passwords don't match!"),r.current.value="",o.current.value=""):fetch("/api/signin",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:c.current.value.trim(),name:t.current.value.trim(),surname:n.current.value.trim(),password:o.current.value})}).then((function(e){return e.json()})).then((function(s){s.success?(e.handleModalMessage("Welcome to Humans of the Streets!"),c.current.value="",t.current.value="",n.current.value="",r.current.value="",o.current.value=""):e.handleModalMessage("The user is already registered!")})).catch((function(t){console.log("An error occurred: "+t.message),e.handleModalMessage("Ops! Something went wrong :(")}))},children:[Object(u.jsxs)("div",{className:"form-div",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",name:"name",id:"name",required:!0,autoComplete:"given-name",ref:t})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"surname",children:"Surname: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",name:"surname",id:"surname",required:!0,autoComplete:"family-name",ref:n})]})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"email",name:"email",id:"email",required:!0,autoComplete:"email",ref:c})]})}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",name:"password",id:"password",required:!0,autoComplete:"new-password",ref:r})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"confirm-password",children:"Confirm password: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",name:"confirm-password",id:"confirm-password",required:!0,autoComplete:"new-password",ref:o})]})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{className:"disclaimer-text",children:[Object(u.jsx)("input",{className:"checkbox",type:"checkbox",required:!0,ref:a}),"By signing up, you accept our Privacy Agreement."]})}),Object(u.jsx)(S,{type:"submit",className:"signup-button",text:"Sign up"})]})})}),k=n(35),F=n.n(k),M=function(e){var t=Object(s.useState)(!1),n=Object(a.a)(t,2),c=n[0],r=n[1];Object(s.useEffect)((function(){r(e.userPaneVisibility)}),[e.userPaneVisibility]);var o=e.linksToShow.map((function(t,n){return Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:t[1],className:F.a["user-pane-link"],onClick:e.toggleUserPaneVisibility,children:t[0]})},"link-".concat(n))}));return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{className:F.a["user-pane"],style:{display:"".concat(c?"block":"none")},children:Object(u.jsxs)("ul",{children:[o,Object(u.jsx)("br",{}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/",onClick:e.logOutUser,children:"Logout"})})]})})})},D=(n(63),function(e){var t="main-wrapper "+e.className;return Object(u.jsx)("main",{className:t,children:e.children})}),U=n(43),A=n.n(U),V=function(e){return Object(u.jsx)("button",{type:e.type,onClick:e.onClick,className:"".concat(A.a["dark-button"]," ").concat(e.className),children:e.text})},L=(n(64),function(e){var t="colored-wrapper "+e.className;return Object(u.jsx)("div",{className:t,children:e.children})}),I=(n(65),function(e){var t=Object(s.useState)({story:{name:"",surname:"",age:"",gender:"female",email:"",telephone_number:"",from_city:"",from_country:"",current_city:"",current_country:"",spot:"",story:"",advice:"",dream:"",share_contact:!1}}),n=Object(a.a)(t,2),c=n[0],r=n[1],o=Object(s.useState)(!1),i=Object(a.a)(o,2),l=i[0],d=i[1],j=function(e,t){r((function(n){var s=Object.assign({},n.story);return s[t]=e.trim(),{story:s}}))};return l?Object(u.jsxs)(L,{className:"story-submitted",children:[Object(u.jsx)("h2",{className:"story-submitted__header",children:"Your story was successfully submitted."}),Object(u.jsx)(S,{className:"story-submitted__button",onClick:function(){d(!1)},text:"Add a new one"})]}):Object(u.jsxs)("section",{children:[Object(u.jsx)("h2",{className:"section-header",children:"Add a new story"}),Object(u.jsxs)("div",{className:"addstory-container",children:[Object(u.jsx)("h3",{children:"Interviewee info:"}),Object(u.jsxs)("form",{className:"addstory-form",onSubmit:function(e){e.preventDefault(),e.target.checkValidity();var t={name:(c=c.story).name.trim(),surname:c.surname.trim(),age:c.age,gender:c.gender,where_to_find:{spot:c.spot.trim()},from:{city:c.from_city.trim(),country:c.from_country.trim()},currently_in:{city:c.current_city.trim(),country:c.current_country.trim()},interview:{story:c.story.trim(),advice:c.advice.trim(),dream:c.dream.trim()},contact:{email:c.email.trim(),telephone_number:c.telephone_number.trim(),share_contact:c.share_contact},img:c.img.trim(),submittedBy:sessionStorage.getItem("user")};fetch("/api/humans/new",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){0!=e.results.length&&d(!0)})).catch((function(e){console.log("An error occurred: "+e.message)}))},children:[Object(u.jsx)("h4",{children:"Personal data:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(u.jsx)("input",{type:"text",name:"name",id:"name",required:!0,autoComplete:"given-name",value:c.name,onChange:function(e){j(e.target.value,"name")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"surname",children:"Surname: "}),Object(u.jsx)("input",{type:"text",name:"surname",id:"surname",required:!0,autoComplete:"family-name",value:c.surname,onChange:function(e){j(e.target.value,"surname")}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{className:"shorter-input",children:[Object(u.jsx)("label",{htmlFor:"age",children:"Age: "}),Object(u.jsx)("input",{type:"number",name:"age",id:"age",min:"18",max:"120",required:!0,value:c.age,onChange:function(e){j(e.target.value,"age")}})]}),Object(u.jsxs)("div",{className:"shorter-input",children:[Object(u.jsx)("label",{htmlFor:"gender",children:"Gender: "}),Object(u.jsxs)("select",{type:"number",name:"gender",id:"gender",required:!0,autoComplete:"sex",value:c.gender,onChange:function(e){j(e.target.value,"gender")},children:[Object(u.jsx)("option",{value:"female",children:"Female"}),Object(u.jsx)("option",{value:"male",children:"Male"}),Object(u.jsx)("option",{value:"other",children:"Other"})]})]}),Object(u.jsx)("h4",{children:"Contact:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(u.jsx)("input",{type:"email",name:"email",id:"email",autoComplete:"email",value:c.name,onChange:function(e){j(e.target.value,"email")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"telephone",children:"Telephone: "}),Object(u.jsx)("input",{type:"tel",name:"telephone",id:"telephone",autoComplete:"tel",value:c.telephone_number,onChange:function(e){j(e.target.value,"telephone_number")}})]}),Object(u.jsx)("h4",{children:"From:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"from-city",children:"City: "}),Object(u.jsx)("input",{type:"text",name:"from-city",id:"from-city",required:!0,autoComplete:"address-level2",value:c.from_city,onChange:function(e){j(e.target.value,"from_city")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"from-country",children:"Country: "}),Object(u.jsx)("input",{type:"text",name:"from-country",id:"from-country",required:!0,autoComplete:"country",value:c.from_city,onChange:function(e){j(e.target.value,"from_country")}})]}),Object(u.jsx)("h4",{children:"Living in:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"current-city",children:"City: "}),Object(u.jsx)("input",{type:"text",name:"current-city",id:"current-city",required:!0,autoComplete:"address-level2",value:c.current_city,onChange:function(e){j(e.target.value,"current_city")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"current_country",children:"Country: "}),Object(u.jsx)("input",{type:"text",name:"current_country",id:"current_country",required:!0,autoComplete:"country",value:c.current_country,onChange:function(e){j(e.target.value,"current_country")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"spot",children:"Where usually found: "}),Object(u.jsx)("textarea",{name:"spot",id:"spot",value:c.spot,onChange:function(e){j(e.target.value,"spot")}})]}),Object(u.jsx)("h4",{children:"Interview:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"story",children:"Story: "}),Object(u.jsx)("textarea",{name:"story",id:"story",rows:"4",required:!0,value:c.spot,onChange:function(e){j(e.target.value,"story")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"advice",children:"Advice: "}),Object(u.jsx)("textarea",{name:"advice",id:"advice",rows:"2",required:!0,value:c.spot,onChange:function(e){j(e.target.value,"advice")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"dream",children:"Dream: "}),Object(u.jsx)("textarea",{name:"dream",id:"dream",rows:"2",required:!0,value:c.spot,onChange:function(e){j(e.target.value,"dream")}})]}),Object(u.jsx)("h4",{children:"Image:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"img",children:"Image link: "}),Object(u.jsx)("input",{type:"text",name:"img",id:"img",rows:"2",autoComplete:"photo",value:c.img,onChange:function(e){j(e.target.value,"img")}})]}),Object(u.jsx)("h4",{children:"Consent:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Does the interviewee agreed to sharing their contact information?"}),Object(u.jsxs)("div",{className:"shorter-input",onChange:function(e){j(e.target.value,"share_contact")},children:[Object(u.jsx)("input",{type:"radio",id:"share-yes",name:"share-consent",value:"true"}),Object(u.jsx)("label",{htmlFor:"share-yes",children:"Yes"}),Object(u.jsx)("input",{type:"radio",id:"share-no",name:"share-consent",value:"false",checked:!0}),Object(u.jsx)("label",{htmlFor:"share-no",children:"No"})]})]}),Object(u.jsx)(V,{type:"submit",className:"newstory-button",text:"Submit story"})]})]})]})}),q=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M,{linksToShow:[["Your profile","/profile"],["Browse stories","/browse"],["Homepage","/"]],userPaneVisibility:e.showUserPane,toggleUserPaneVisibility:e.toggleUserPaneVisibility,logOutUser:e.logOutUser}),Object(u.jsx)(D,{children:Object(u.jsx)(I,{})})]})},E=function(e){var t=Object(s.useState)([]),n=Object(a.a)(t,2),c=n[0],r=n[1];Object(s.useEffect)((function(){"all"!==e.country&&null!==e.country&&fetch("/api/locations/cities/".concat(e.country)).then((function(e){return e.json()})).then((function(e){r(e.results.sort())})).catch((function(e){console.log("An error occurred: "+e.message)}))}),[e.country]);var o=c.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"cities",children:"City: "}),Object(u.jsxs)("select",{defaultValue:"all",id:"cities",onChange:function(t){e.handleCurrentCity(t.target.value)},children:[Object(u.jsx)("option",{value:"all",children:"All cities"}),o]})]})},B=(n(66),function(e){var t=Object(s.useState)([]),n=Object(a.a)(t,2),c=n[0],r=n[1];Object(s.useEffect)((function(){fetch("/api/locations/countries").then((function(e){return e.json()})).then((function(e){r(e.results.sort())})).catch((function(e){console.log("An error occurred: "+e.message)}))}),[]);var o=c.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"countries",children:"Country: "}),Object(u.jsxs)("select",{id:"countries",onChange:function(t){e.handleCurrentCountry(t.target.value)},children:[Object(u.jsx)("option",{value:"all",children:"All countries"}),o]})]})}),H=function(e){var t=Object(s.useState)(null),n=Object(a.a)(t,2),c=n[0],r=n[1],o=Object(s.useState)(null),i=Object(a.a)(o,2),l=i[0],d=i[1];Object(s.useEffect)((function(){e.handleSearchLocale({country:c,city:l})}),[c,l]);return Object(u.jsxs)("div",{className:"country-city-selector",children:[Object(u.jsx)(B,{handleCurrentCountry:function(e){"all"===e?(r(null),d(null)):(r(e),d(null))}}),c?Object(u.jsx)(E,{handleCurrentCity:function(e){d(e)},country:c}):null]})},J=n(44),Y=n.n(J),R=function(e){return Object(u.jsx)("div",{className:"".concat(Y.a["grid-item"]," ").concat(e.className),children:e.children})},W=n.p+"static/media/no_image.ced3df5f.jpg",G=(n(67),function(e){var t=e.story,n=e.editStoryUI;return Object(u.jsxs)(R,{className:"story-container",children:[n||null,Object(u.jsx)("img",{src:t.img||W,alt:"".concat(t.name," ").concat(t.surname)}),Object(u.jsxs)("div",{className:"story-text-container",children:[Object(u.jsxs)("h3",{children:[t.name," ",t.surname," (",t.age,", ",t.gender,")"]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"From: "}),t.from.city," (",t.from.country,")"]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Currently in: "}),t.currently_in.city," (",t.currently_in.country,")"]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Story: "}),t.interview.story]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Advice: "}),t.interview.advice]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Dream: "}),t.interview.dream]})]})]},t._id)}),z=(n(68),function(e){var t=e.results,n=t.map((function(e){if(!1!==e.approved&&"false"!==e.approved)return Object(u.jsx)(G,{story:e},e._id)}));return t.length>0?Object(u.jsx)("div",{className:"results-container",children:n}):Object(u.jsx)("div",{className:"results-container",children:Object(u.jsxs)(R,{className:"something-went-wrong",children:[Object(u.jsx)("h3",{children:"Ops! Something went wrong :("}),Object(u.jsx)("p",{children:"Try refreshing the page. We're sorry for the inconvenience."})]})})}),K=(n(69),function(e){var t=Object(s.useState)({}),n=Object(a.a)(t,2),c=n[0],r=n[1],o=Object(s.useState)([]),i=Object(a.a)(o,2),l=i[0],d=i[1];Object(s.useEffect)((function(){var e;e=null==c.country?"/api/humans/":null==c.city||"all"==c.city?"/api/humans/".concat(c.country,"/all"):"/api/humans/".concat(c.country,"/").concat(c.city),fetch(e).then((function(e){return e.json()})).then((function(e){d(e.results)})).catch((function(e){console.log("An error occurred: "+e.message)}))}),[c]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M,{linksToShow:[["Your profile","/profile"],["Add story","/add"],["Homepage","/"]],userPaneVisibility:e.showUserPane,toggleUserPaneVisibility:e.toggleUserPaneVisibility,logOutUser:e.logOutUser}),Object(u.jsx)(D,{children:Object(u.jsxs)("section",{children:[Object(u.jsxs)("div",{className:"content-header-container",children:[Object(u.jsx)("h2",{className:"section-header",children:"Read their stories"}),Object(u.jsx)("p",{children:"Choose a country and/or a city to start browsing their stories."})]}),Object(u.jsxs)("div",{className:"story-selector-container",children:[Object(u.jsx)(H,{handleSearchLocale:function(e){r({city:e.city,country:e.country})}}),Object(u.jsx)(z,{results:l})]})]})})]})}),Q=(n(70),n(22)),X=n.p+"static/media/loading.166632e1.gif",Z=n(19),$=n.n(Z),ee=function(){var e,t=Object(s.useState)((function(){fetch("/api/humans").then((function(e){return e.json()})).then((function(e){r(e.results.slice(0,4))})).catch((function(e){console.log("An error occurred: "+e.message)}))})),n=Object(a.a)(t,2),c=n[0],r=n[1];return e=c?c.map((function(e){return Object(u.jsxs)(Q.a.Item,{children:[Object(u.jsx)("img",{className:"".concat($.a["d-block w-100"]," ").concat($.a["carousel-img"]),src:e.img,alt:"First slide"}),Object(u.jsxs)(Q.a.Caption,{className:$.a["carousel-caption"],children:[Object(u.jsx)("h3",{style:{color:"white"},children:"".concat(e.name," ").concat(e.surname," (").concat(e.age,")")}),Object(u.jsx)("p",{style:{fontSize:"1.2rem",textAlign:"center"},children:e.interview.advice})]})]},e._id)})):Object(u.jsxs)(Q.a.Item,{children:[Object(u.jsx)("img",{className:"".concat($.a["d-block w-100"]," ").concat($.a["carousel-img"]),src:X,alt:"Loading animation"}),Object(u.jsx)(Q.a.Caption,{children:Object(u.jsx)("h3",{style:{color:"black"},children:"Loading..."})})]},"loading"),Object(u.jsx)(Q.a,{indicators:!1,fade:!0,interval:4e3,className:$.a["carousel-container"],children:e})},te=function(e){return Object(u.jsx)(D,{children:Object(u.jsxs)("section",{className:"home-content__container",children:[Object(u.jsxs)("div",{className:"home-content",children:[Object(u.jsx)("h1",{className:"home-content__allcaps-header",children:"Humans of the Streets"}),Object(u.jsx)("h2",{className:"home-content__white-header",children:"The stories of those who live on the street"}),Object(u.jsx)("div",{className:"home-content__paragraph-text",children:Object(u.jsx)("p",{children:"Join a community of volunteers dedicated to helping homeless people around the world."})}),Object(u.jsx)(V,{type:"button",onClick:e.toggleSignupFormVisibility,text:"Start\xa0helping",className:"home-content__button"})]}),Object(u.jsx)(ee,{})]})})},ne=n(36),se=n.n(ne),ce=function(e){return Object(u.jsxs)("nav",{className:se.a["profile-nav"],children:[Object(u.jsx)(i.b,{to:"/browse/",children:Object(u.jsx)("div",{children:"Browse stories"})}),Object(u.jsx)(i.b,{to:"/add/",children:Object(u.jsx)("div",{children:"Add new story"})}),Object(u.jsx)(i.b,{to:"/",onClick:e.logOutUser,children:Object(u.jsx)("div",{className:se.a["accented-button"],children:"Logout"})})]})},re=(n(71),function(e){return Object(u.jsx)("div",{className:"edit-story-UI",children:Object(u.jsx)("button",{onClick:function(){e.handleModalMessage("Do you really want to delete this element?"),e.handleStoryToDelete((function(t){var n=Object.assign({},t.storyToDelete);return n.id=e.id,{storyToDelete:n}}))},className:"delete-button"})})}),oe=function(e){var t,n=Object(s.useState)(sessionStorage.getItem("user")),c=Object(a.a)(n,2),r=c[0],o=(c[1],Object(s.useState)((function(){fetch("/api/humans/user/".concat(r)).then((function(e){return e.json()})).then((function(e){e.foundStories&&d(e.results)})).catch((function(e){console.log("An error occurred: "+e.message)}))}))),i=Object(a.a)(o,2),l=i[0],d=i[1];return Object(s.useEffect)((function(){if(e.storyToDelete.storyToDelete.delete){var t=l.filter((function(t){return t._id!==e.storyToDelete.storyToDelete.id}));d(t)}}),[e.storyToDelete.storyToDelete.delete]),l&&(t=l.map((function(t){return Object(u.jsx)(G,{story:t,editStoryUI:Object(u.jsx)(re,{id:t._id,handleStoryToDelete:e.handleStoryToDelete,handleModalMessage:e.handleModalMessage})},"story-".concat(t._id))}))),Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Your submitted stories"}),Object(u.jsx)("div",{className:"results-container",children:t})]})},ae=n(21),ie=n.n(ae),le=n(17),ue=n.n(le),de=function(e){var t=Object(u.jsx)("button",{onClick:function(){e.onClick("")},className:"".concat(ue.a["modal-button"]," ").concat(ue.a["left-button"]),children:"Cancel"});return Object(u.jsx)("div",{onClick:function(){e.onClick(null)},className:"".concat(ue.a.modal," ").concat(e.className),children:Object(u.jsxs)("div",{className:"".concat(ue.a["modal-content"]),children:[Object(u.jsx)("p",{className:"".concat(ue.a["modal-text"]),children:e.text}),Object(u.jsxs)("div",{className:"".concat(ue.a["button-container"]),children:[e.cancelButton?t:null,Object(u.jsx)("button",{onClick:function(){e.handleStoryToDelete&&e.handleStoryToDelete((function(e){var t=Object.assign({},e.storyToDelete);return t.delete=!0,{storyToDelete:t}})),e.onClick(null)},className:"".concat(ue.a["modal-button"]),children:"Ok"})]})]})})},je=n(37),be=n.n(je),he=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(V,{text:"Cancel",className:be.a["show-data-button"],onClick:e.onCancel}),Object(u.jsx)(V,{text:"Confirm",className:be.a["show-data-button"],onClick:e.onConfirm})]})},me=function(){var e=Object(s.useState)(sessionStorage.getItem("user")),t=Object(a.a)(e,2),n=t[0],c=(t[1],Object(s.useState)((function(){fetch("/api/users/id/".concat(n)).then((function(e){return e.json()})).then((function(e){i({user:e.results}),b(e.results)})).catch((function(e){console.log("An error occurred: "+e.message)}))}))),r=Object(a.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)(),d=Object(a.a)(l,2),j=d[0],b=d[1],h=Object(s.useState)(!0),m=Object(a.a)(h,2),O=m[0],x=m[1],f=Object(s.useState)(!1),p=Object(a.a)(f,2),g=p[0],y=p[1],v=Object(s.useState)(!1),w=Object(a.a)(v,2),_=w[0],C=w[1],N=Object(s.useState)(""),S=Object(a.a)(N,2),P=S[0],T=S[1],k=Object(s.useState)({newPasswordObj:{}}),F=Object(a.a)(k,2),M=F[0],D=F[1],U=function(e,t){D((function(n){var s=Object.assign(n.newPasswordObj);return s[t]=e.target.value,{newPasswordObj:s}}))},A=Object(u.jsxs)("div",{children:[Object(u.jsx)(V,{text:"Modify data",className:ie.a["show-data-button"],onClick:function(){x(!1)}}),Object(u.jsx)(V,{text:"Modify password",className:ie.a["show-data-button"],onClick:function(){C(!0)}})]}),L=Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:ie.a["profile-forms"],children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"old-password",children:"Current password: "}),Object(u.jsx)("input",{type:"password",id:"old-password",autoComplete:"current-password",value:M.newPasswordObj.currentPassword||"",onChange:function(e){return U(e,"currentPassword")}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"new-password",children:"New password: "}),Object(u.jsx)("input",{type:"password",id:"new-password",autoComplete:"new-password",value:M.newPasswordObj.newPassword||"",onChange:function(e){return U(e,"newPassword")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"confirm-new-password",children:"Confirm new password: "}),Object(u.jsx)("input",{type:"password",id:"confirm-new-password",autoComplete:"new-password",value:M.newPasswordObj.confirmPassword||"",onChange:function(e){return U(e,"confirmPassword")}})]}),Object(u.jsx)(he,{onCancel:function(){C(!1)},onConfirm:function(){fetch("/api/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:o.user.email,password:M.newPasswordObj.currentPassword})}).then((function(e){return e.json()})).then((function(e){return e.session?M.newPasswordObj.newPassword!==M.newPasswordObj.confirmPassword?(T("The two passwords don't match!"),y(!0),void D({newPasswordObj:{}})):(i((function(e){var t=Object.assign(e.user);return t.password=M.newPasswordObj.confirmPassword,{user:t}})),void fetch("/api/users/password",{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify({_id:o.user._id,password:o.user.password})}).then((function(e){return e.json()})).then((function(e){1===e.nModified?(y(!0),T("Personal details changed successfully!"),D({newPasswordObj:{}}),C(!1)):(y(!0),T("The was an issue with your request!"),D({newPasswordObj:{}}),C(!1))})).catch((function(e){console.log("An error occurred: "+e.message)}))):(T("The password you inserted is wrong!"),y(!0),void D({newPasswordObj:{}}))})).catch((function(e){console.log("An error occurred: "+e.message)}))}})]}),I=Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:ie.a["profile-forms"],children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(u.jsx)("input",{type:"text",id:"name",placeholder:o?o.user.name:"Your name",autoComplete:"given-name",value:o?o.user.name:"",onChange:function(e){i((function(t){var n=Object.assign(t.user);return n.name=e.target.value.trim(),{user:n}}))},disabled:O})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"surname",children:"Surname: "}),Object(u.jsx)("input",{type:"text",id:"surname",placeholder:o?o.user.surname:"Your name",autoComplete:"family-name",value:o?o.user.surname:"",onChange:function(e){i((function(t){var n=Object.assign(t.user);return n.surname=e.target.value.trim(),{user:n}}))},disabled:O})]}),O?A:Object(u.jsx)(he,{onCancel:function(){x(!0)},onConfirm:function(){if(j.name===o.user.name&&j.surname===o.user.surname)return y(!0),void T("Please change your data!");fetch("/api/users/update/data",{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify({oldmail:o.user.email,email:o.user.email,name:o.user.name,surname:o.user.surname})}).then((function(e){return e.json()})).then((function(e){1===e.results.modifiedCount&&(y(!0),T("Personal details changed successfully!"))})).catch((function(e){console.log("An error occurred: "+e.message)})),x(!0)}})]});return Object(u.jsxs)(u.Fragment,{children:[g&&Object(u.jsx)(de,{onClick:function(){y(!1)},text:P}),Object(u.jsxs)("div",{className:ie.a["personal-data-container"],children:[Object(u.jsx)("h3",{children:"Personal data"}),_?L:I]})]})},Oe=n(28),xe=n(29),fe=n(27),pe=n.n(fe),ge=function(e){var t=e.components.map((function(e,t){return Object(u.jsxs)(xe.a,{children:[Object(u.jsx)(Oe.a.Toggle,{as:xe.a.Header,eventKey:"".concat(t),className:pe.a["accordion-header"],children:Object(u.jsx)("h3",{className:pe.a["accordion-title"],children:e.title})}),Object(u.jsx)(Oe.a.Collapse,{eventKey:"".concat(t),children:Object(u.jsx)(xe.a.Body,{children:Object(u.jsx)("section",{children:e.body})})})]},"card-".concat(t))}));return Object(u.jsx)("div",{className:pe.a["accordion-container"],children:Object(u.jsx)(Oe.a,{defaultActiveKey:"0",children:t})})},ye=function(e){var t=[{title:"Navigation",body:Object(u.jsx)(ce,{handleSession:e.handleSession,logOutUser:e.logOutUser})},{title:"Edit user data",body:Object(u.jsx)(me,{})},{title:"Delete submitted stories",body:Object(u.jsx)(oe,{handleModalMessage:e.handleModalMessage,handleStoryToDelete:e.handleStoryToDelete,storyToDelete:e.storyToDelete})}];return Object(u.jsxs)(D,{children:[Object(u.jsx)("h2",{children:"Your profile"}),Object(u.jsx)(ge,{components:t})]})},ve=function(){var e=Object(s.useState)((function(){fetch("/api/login/check").then((function(e){return e.json()})).then((function(e){c(e.isLogged),fetch("/api/users/email",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:e.user})}).then((function(e){return e.json()})).then((function(e){e.userFound&&sessionStorage.setItem("user",e.results._id)})).catch((function(e){console.log("An error occurred: "+e.message)}))})).catch((function(e){console.log("An error occurred: "+e.message)}))})),t=Object(a.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(!1),o=Object(a.a)(r,2),j=o[0],b=o[1],h=Object(s.useState)(!1),m=Object(a.a)(h,2),x=m[0],f=m[1],p=Object(s.useState)(null),g=Object(a.a)(p,2),y=g[0],v=g[1],_=Object(s.useState)({storyToDelete:{id:"",delete:!1}}),C=Object(a.a)(_,2),N=C[0],S=C[1],k=Object(s.useState)(!1),F=Object(a.a)(k,2),M=F[0],D=F[1],U=function(e){c(e)};Object(s.useEffect)((function(){n||sessionStorage.removeItem("user")}),[n]);var A=function(){b(!j),x&&f(!1)},V=function(){f(!x),j&&b(!1)},L=function(e){v(e)},I=function(e){S(e)};Object(s.useEffect)((function(){N.storyToDelete.id&&N.storyToDelete.delete&&fetch("/api/humans/".concat(N.storyToDelete.id),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){e.deletedCount>0&&S({storyToDelete:{id:"",delete:!1}})})).catch((function(e){console.log("An error occurred: "+e.message)}))}),[N]);var E=function(){D(!M)},B=function(){fetch("/api/logout",{headers:{"Content-Type":"application/json"},method:"PUT"}).then((function(e){return e.json()})).then((function(e){e.loggedOut?U(!1):L("It wasn't possible to log you out!")})).catch((function(e){console.log("An error occurred: "+e.message)}))};return Object(u.jsxs)(i.a,{children:[Object(u.jsxs)(l.d,{children:[Object(u.jsxs)(l.b,{exact:!0,path:"/",children:[y?Object(u.jsx)(de,{onClick:L,text:y}):null,Object(u.jsx)(O,{session:n,toggleLoginFormVisibility:A,handleModalMessage:L}),j?Object(u.jsx)(P,{onLogin:U,toggleSignupFormVisibility:V,toggleLoginFormVisibility:A,handleModalMessage:L}):null,x?Object(u.jsx)(T,{handleModalMessage:L}):null,Object(u.jsx)(te,{toggleSignupFormVisibility:V})]}),Object(u.jsxs)(l.b,{exact:!0,path:"/browse",children:[Object(u.jsx)(w,{session:n,toggleUserPaneVisibility:E}),Object(u.jsx)(K,{showUserPane:M,toggleUserPaneVisibility:E,logOutUser:B})]}),n?Object(u.jsxs)(l.b,{exact:!0,path:"/profile",children:[y?Object(u.jsx)(de,{onClick:L,text:y,cancelButton:!0,handleStoryToDelete:I}):null,Object(u.jsx)(w,{}),Object(u.jsx)(ye,{session:n,handleModalMessage:L,handleStoryToDelete:I,handleSession:U,storyToDelete:N,logOutUser:B})]}):Object(u.jsx)(l.a,{to:"/"}),Object(u.jsxs)(l.b,{path:"/add",children:[Object(u.jsx)(w,{session:n,toggleUserPaneVisibility:E}),Object(u.jsx)(q,{showUserPane:M,toggleUserPaneVisibility:E,logOutUser:B})]})]}),Object(u.jsx)(d,{})]})};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(ve,{})}),document.getElementById("root"))}],[[72,1,2]]]);
//# sourceMappingURL=main.261a3f45.chunk.js.map