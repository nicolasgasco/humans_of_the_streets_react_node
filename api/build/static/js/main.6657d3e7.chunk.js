(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports={modal:"UserMessage_modal__27XK6","modal-content":"UserMessage_modal-content__2AuH2","modal-text":"UserMessage_modal-text__2u3ec","modal-button":"UserMessage_modal-button__1xvQ7","button-container":"UserMessage_button-container__3QHSD","left-button":"UserMessage_left-button__1stIu"}},,,,,,,,,function(e,t,n){e.exports={"personal-data-container":"ShowPersonalData_personal-data-container__3IOh9","show-data-button":"ShowPersonalData_show-data-button__oj5ab"}},function(e,t,n){e.exports={"accordion-header":"AccordionProfile_accordion-header__3dm8F","accordion-title":"AccordionProfile_accordion-title__2LcYI"}},,,,,,,,function(e,t,n){e.exports={"show-data-button":"ConfirmCancelButtons_show-data-button__8pWsf"}},,,function(e,t,n){e.exports={"main-logo":"MainLogo_main-logo__Ezz2d",wrapper:"MainLogo_wrapper__3a_dV","typing-demo":"MainLogo_typing-demo__19WlV",typing:"MainLogo_typing__KGnyG",blink:"MainLogo_blink__1zUxH"}},function(e,t,n){e.exports={"white-button":"WhiteButton_white-button__1zVyC"}},function(e,t,n){e.exports={"dark-button":"DarkButton_dark-button__3Eond"}},function(e,t,n){e.exports={"standard-button":"StandardButton_standard-button__2Xw7G"}},,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(18),o=n.n(r),a=(n(45),n(46),n(3)),i=n(9),l=n(6),u=(n(47),n(0));var d=function(){return Object(u.jsxs)("footer",{className:"footer",children:[Object(u.jsxs)("div",{className:"pictures-icon-credits",children:[Object(u.jsxs)("small",{children:["Picture by"," ",Object(u.jsx)("a",{href:"https://www.pexels.com/es-es/@harrisonhaines?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels",target:"_blank",rel:"noreferrer",children:"Harrison Haines"})," ","on"," ",Object(u.jsx)("a",{href:"https://www.pexels.com/",target:"_blank",rel:"noreferrer",children:"Pexels"}),"."]}),Object(u.jsxs)("small",{children:["Icons by"," ",Object(u.jsx)("a",{href:"https://www.flaticon.es/",target:"_blank",rel:"noreferrer",children:"Flaticon"}),"."]})]}),Object(u.jsx)("small",{className:"made-by",children:"Made by Nicolas Gasco."})]})},j=(n(49),function(e){return Object(u.jsxs)("nav",{className:"main-nav",children:[Object(u.jsx)(i.b,{to:"/browse/",children:"Browse"}),e.session?Object(u.jsx)(i.b,{to:"/profile/",children:"Profile"}):Object(u.jsx)("button",{onClick:e.toggleLoginFormVisibility,children:"Login"})]})}),b=(n(55),n(56),function(){return Object(u.jsxs)("div",{className:"animated-title",children:[Object(u.jsx)("div",{className:"text-top",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:"Humans"}),Object(u.jsxs)("span",{children:[Object(u.jsx)("span",{style:{display:"inline",fontSize:"2rem",color:"black"},children:"of the"})," Streets"]})]})}),Object(u.jsx)("div",{className:"text-bottom",children:Object(u.jsx)("div",{children:Object(u.jsx)("p",{style:{fontSize:"1.4rem",margin:"0"},children:"Read their stories..."})})})]})}),h=(n(57),function(e){return e.session?Object(u.jsx)("button",{onClick:e.toggleUserPaneVisibility,className:"user-icon"}):null}),m=function(e){return window.innerWidth,Object(u.jsxs)("header",{className:"main-header",children:[Object(u.jsx)("div",{className:"picture-container",children:Object(u.jsx)(b,{})}),Object(u.jsx)(j,{session:e.session,toggleLoginFormVisibility:e.toggleLoginFormVisibility})]})},O=n(37),x=n.n(O),f=function(){return Object(u.jsx)("div",{children:Object(u.jsx)(i.b,{to:"/",children:Object(u.jsxs)("h1",{className:x.a["main-logo"],children:["Humans ",Object(u.jsx)("span",{children:"of"}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:"the"})," Streets"]})})})},g=(n(58),function(e){return Object(u.jsxs)("div",{className:"slim-header",children:[Object(u.jsx)(f,{}),Object(u.jsx)(h,{toggleUserPaneVisibility:e.toggleUserPaneVisibility,session:e.session})]})}),p=n(20),y=(n(59),n(38)),v=n.n(y),w=function(e){return Object(u.jsx)("button",{type:e.type,onClick:e.onClick,className:v.a["white-button"],children:e.text})},_=n(16),C=n.n(_),S=function(e){var t=Object(u.jsx)("button",{onClick:function(){e.onClick("")},className:"".concat(C.a["modal-button"]," ").concat(C.a["left-button"]),children:"Cancel"});return Object(u.jsx)("div",{onClick:function(){e.onClick(null)},className:"".concat(C.a.modal," ").concat(e.className),children:Object(u.jsxs)("div",{className:"".concat(C.a["modal-content"]),children:[Object(u.jsx)("p",{className:"".concat(C.a["modal-text"]),children:e.text}),Object(u.jsxs)("div",{className:"".concat(C.a["button-container"]),children:[e.cancelButton?t:null,Object(u.jsx)("button",{onClick:function(){e.handleStoryToDelete&&e.handleStoryToDelete((function(e){var t=Object.assign({},e.storyToDelete);return t.delete=!0,{storyToDelete:t}})),e.onClick(null)},className:"".concat(C.a["modal-button"]),children:"Ok"})]})]})})},N=function(e){var t=Object(s.useState)({email:"",password:""}),n=Object(a.a)(t,2),c=n[0],r=n[1];return Object(u.jsxs)("div",{className:"login-container",children:[Object(u.jsxs)("form",{className:"login-form",onSubmit:function(t){t.preventDefault(),t.target.checkValidity(),fetch("/api/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){t.session?(e.handleModalMessage("Welcome back!"),r({email:"",password:""}),e.onLogin(!0),sessionStorage.setItem("user",t.user._id),e.toggleLoginFormVisibility()):(e.handleModalMessage("Wrong user or password!"),r({email:"",password:""}))})).catch((function(t){console.log("An error occurred: "+t.message),e.handleModalMessage("Something went wrong :( Try again.")}))},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(u.jsx)("input",{type:"email",name:"username",id:"username",required:!0,value:c.email,onChange:function(e){var t;t=e.target.value,r((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:t})}))}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(u.jsx)("input",{type:"password",name:"password",id:"password",required:!0,value:c.password,onChange:function(e){var t;t=e.target.value,r((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:t})}))}})]}),Object(u.jsx)(w,{type:"submit",className:"login-button",text:"Login"})]}),Object(u.jsxs)("p",{className:"white-text",children:["Are you new?"," ",Object(u.jsx)("span",{onClick:e.toggleSignupFormVisibility,className:"signup-link",children:"Sign up"})," ","instead."]})]})},P=(n(60),function(e){var t=Object(s.useState)({user:{name:"",surname:"",email:"",password:"","confirm-password":"",checked:!1}}),n=Object(a.a)(t,2),c=n[0],r=n[1],o=Object(s.useState)(!0),i=Object(a.a)(o,2),l=i[0],d=i[1],j=Object(s.useState)(!1),b=Object(a.a)(j,2),h=b[0],m=b[1],O=function(){r({user:{name:"",surname:"",email:"",password:"","confirm-password":"",checked:!1}})},x=function(e,t){d(!0),m(!1),r((function(n){var s=Object.assign({},n.user);return s[t]=e,{user:s}}))},f=Object(u.jsx)("div",{children:Object(u.jsx)("p",{class:"red-text",children:"The two passwords don't match!"})}),g=Object(u.jsx)("div",{children:Object(u.jsx)("p",{class:"red-text",children:"The user is already registered!"})});return Object(u.jsxs)("div",{className:"signup-container",children:[Object(u.jsxs)("form",{className:"signup-form",onSubmit:function(e){e.preventDefault(),e.target.checkValidity(),c.user.password!==c.user["confirm-password"]?(d(!1),O()):fetch("/api/signin",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:c.user.email,name:c.user.name,surname:c.user.surname,password:c.user.password})}).then((function(e){return e.json()})).then((function(e){e.success?(window.alert("Welcome to Humans of the Streets!"),O()):m(!0)})).catch((function(e){console.log("An error occurred: "+e.message)}))},children:[Object(u.jsxs)("div",{className:"form-div",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",name:"name",id:"name",required:!0,value:c.user.name,onChange:function(e){x(e.target.value,"name")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"surname",children:"Surname: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",name:"surname",id:"surname",required:!0,value:c.user.surname,onChange:function(e){x(e.target.value,"surname")}})]})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"email",name:"email",id:"email",required:!0,value:c.user.email,onChange:function(e){x(e.target.value,"email")}})]})}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{className:" ".concat(l?"":"invalid"),type:"password",name:"password",id:"password",required:!0,value:c.user.password,onChange:function(e){x(e.target.value,"password")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"confirm-password",children:"Confirm password: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{className:" ".concat(l?"":"invalid"),type:"password",name:"confirm-password",id:"confirm-password",required:!0,value:c.user["confirm-password"],onChange:function(e){x(e.target.value,"confirm-password")}})]})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("input",{className:"checkbox",type:"checkbox",required:!0,checked:c.user.checked,onChange:function(e){x(e.target.value,"checked")}}),"By signing up, you accept our Privacy Agreement."]})}),Object(u.jsx)(w,{type:"submit",className:"login-button",text:"SIgn up"})]}),l?null:f,h?g:null]})}),k=(n(61),function(e){var t=Object(s.useState)(!1),n=Object(a.a)(t,2),c=n[0],r=n[1];console.log(e.userPaneVisibility),Object(s.useEffect)((function(){r(e.userPaneVisibility)}),[e.userPaneVisibility]);var o=e.linksToShow.map((function(t,n){return Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:t[1],className:"user-pane-link",onClick:e.toggleUserPaneVisibility,children:t[0]})},"link-".concat(n))}));return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{className:"user-pane",style:{display:"".concat(c?"block":"none")},children:Object(u.jsx)("ul",{children:o})})})}),T=(n(62),function(e){var t="main-wrapper "+e.className;return Object(u.jsx)("main",{className:t,children:e.children})}),F=n(39),D=n.n(F),M=function(e){return Object(u.jsx)("button",{type:e.type,onClick:e.onClick,className:"".concat(D.a["dark-button"]," ").concat(e.className),children:e.text})},U=(n(63),function(e){var t="colored-wrapper "+e.className;return Object(u.jsx)("div",{className:t,children:e.children})}),A=(n(64),function(e){var t=Object(s.useState)({story:{name:"",surname:"",age:"",gender:"female",email:"",telephone_number:"",from_city:"",from_country:"",current_city:"",current_country:"",spot:"",story:"",advice:"",dream:"",share_contact:!1}}),n=Object(a.a)(t,2),c=n[0],r=n[1],o=Object(s.useState)(!1),i=Object(a.a)(o,2),l=i[0],d=i[1],j=function(e,t){r((function(n){var s=Object.assign({},n.story);return s[t]=e.trim(),{story:s}}))};return l?Object(u.jsxs)(U,{className:"story-submitted",children:[Object(u.jsx)("h2",{className:"story-submitted__header",children:"Your story was successfully submitted."}),Object(u.jsx)(w,{className:"story-submitted__button",onClick:function(){d(!1)},text:"Add a new one"})]}):Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Add a new story"}),Object(u.jsxs)("div",{className:"addstory-container",children:[Object(u.jsx)("h3",{children:"Interviewee info:"}),Object(u.jsxs)("form",{className:"addstory-form",onSubmit:function(e){e.preventDefault(),e.target.checkValidity();var t={name:(c=c.story).name,surname:c.surname,age:c.age,gender:c.gender,where_to_find:{spot:c.spot},from:{city:c.from_city,country:c.from_country},currently_in:{city:c.current_city,country:c.current_country},interview:{story:c.story,advice:c.advice,dream:c.dream},contact:{email:c.email,telephone_number:c.telephone_number,share_contact:c.share_contact},approved:"false",img:c.img};fetch("/api/humans/new",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){0!=e.results.length&&d(!0)})).catch((function(e){console.log("An error occurred: "+e.message)}))},children:[Object(u.jsx)("h4",{children:"Personal data:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(u.jsx)("input",{type:"text",name:"name",id:"name",required:!0,value:c.name,onChange:function(e){j(e.target.value,"name")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"surname",children:"Surname: "}),Object(u.jsx)("input",{type:"text",name:"surname",id:"surname",required:!0,value:c.surname,onChange:function(e){j(e.target.value,"surname")}})]}),Object(u.jsxs)("div",{className:"shorter-input",children:[Object(u.jsx)("label",{htmlFor:"age",children:"Age: "}),Object(u.jsx)("input",{type:"number",name:"age",id:"age",min:"18",max:"120",required:!0,value:c.age,onChange:function(e){j(e.target.value,"age")}})]}),Object(u.jsxs)("div",{className:"shorter-input",children:[Object(u.jsx)("label",{htmlFor:"gender",children:"Gender: "}),Object(u.jsxs)("select",{type:"number",name:"gender",id:"gender",required:!0,value:c.gender,onChange:function(e){j(e.target.value,"gender")},children:[Object(u.jsx)("option",{value:"female",children:"Female"}),Object(u.jsx)("option",{value:"male",children:"Male"}),Object(u.jsx)("option",{value:"other",children:"Other"})]})]}),Object(u.jsx)("h4",{children:"Contact:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(u.jsx)("input",{type:"email",name:"email",id:"email",required:!0,value:c.name,onChange:function(e){j(e.target.value,"email")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"telephone",children:"Telephone: "}),Object(u.jsx)("input",{type:"tel",name:"telephone",id:"telephone",required:!0,value:c.telephone_number,onChange:function(e){j(e.target.value,"telephone_number")}})]}),Object(u.jsx)("h4",{children:"From:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"from-city",children:"City: "}),Object(u.jsx)("input",{type:"text",name:"from-city",id:"from-city",required:!0,value:c.from_city,onChange:function(e){j(e.target.value,"from_city")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"from-country",children:"Country: "}),Object(u.jsx)("input",{type:"text",name:"from-country",id:"from-country",required:!0,value:c.from_city,onChange:function(e){j(e.target.value,"from_country")}})]}),Object(u.jsx)("h4",{children:"Living in:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"current-city",children:"City: "}),Object(u.jsx)("input",{type:"text",name:"current-city",id:"current-city",required:!0,value:c.current_city,onChange:function(e){j(e.target.value,"current_city")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"current_country",children:"Country: "}),Object(u.jsx)("input",{type:"text",name:"current_country",id:"current_country",required:!0,value:c.current_country,onChange:function(e){j(e.target.value,"current_country")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"spot",children:"Where usually found: "}),Object(u.jsx)("textarea",{name:"spot",id:"spot",required:!0,value:c.spot,onChange:function(e){j(e.target.value,"spot")}})]}),Object(u.jsx)("h4",{children:"Interview:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"story",children:"Story: "}),Object(u.jsx)("textarea",{name:"story",id:"story",rows:"4",required:!0,value:c.spot,onChange:function(e){j(e.target.value,"story")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"advice",children:"Advice: "}),Object(u.jsx)("textarea",{name:"advice",id:"advice",rows:"2",required:!0,value:c.spot,onChange:function(e){j(e.target.value,"advice")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"dream",children:"Dream: "}),Object(u.jsx)("textarea",{name:"dream",id:"dream",rows:"2",required:!0,value:c.spot,onChange:function(e){j(e.target.value,"dream")}})]}),Object(u.jsx)("h4",{children:"Image:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"img",children:"Image link: "}),Object(u.jsx)("input",{type:"text",name:"img",id:"img",rows:"2",required:!0,value:c.img,onChange:function(e){j(e.target.value,"img")}})]}),Object(u.jsx)("h4",{children:"Consent:"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Does the interviewee agreed to sharing their contact information?"}),Object(u.jsxs)("div",{className:"shorter-input",onChange:function(e){j(e.target.value,"share_contact")},children:[Object(u.jsx)("input",{type:"radio",id:"share-yes",name:"share-consent",value:"true"}),Object(u.jsx)("label",{htmlFor:"share-yes",children:"Yes"}),Object(u.jsx)("input",{type:"radio",id:"share-no",name:"share-consent",value:"false",checked:!0}),Object(u.jsx)("label",{htmlFor:"share-no",children:"No"})]})]}),Object(u.jsx)(M,{type:"submit",className:"newstory-button",text:"Submit story"})]})]})]})}),V=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(k,{linksToShow:[["Your profile","/profile"],["Browse stories","/browse"],["Homepage","/"]],userPaneVisibility:e.showUserPane,toggleUserPaneVisibility:e.toggleUserPaneVisibility}),Object(u.jsx)(T,{children:Object(u.jsx)(A,{})})]})},L=(n(65),function(e){var t=Object(s.useState)([]),n=Object(a.a)(t,2),c=n[0],r=n[1];Object(s.useEffect)((function(){console.log(e.country),"all"!==e.country&&null!==e.country&&fetch("/api/locations/cities/".concat(e.country)).then((function(e){return e.json()})).then((function(e){r(e.results.sort())})).catch((function(e){console.log("An error occurred: "+e.message)}))}),[e.country]);var o=c.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"cities",children:"City: "}),Object(u.jsxs)("select",{defaultValue:"all",id:"cities",onChange:function(t){e.handleCurrentCity(t.target.value)},children:[Object(u.jsx)("option",{value:"all",children:"All cities"}),o]})]})}),q=(n(66),n(67),function(e){var t=Object(s.useState)([]),n=Object(a.a)(t,2),c=n[0],r=n[1];Object(s.useEffect)((function(){fetch("/api/locations/countries").then((function(e){return e.json()})).then((function(e){r(e.results.sort())})).catch((function(e){console.log("An error occurred: "+e.message)}))}),[]);var o=c.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"countries",children:"Country: "}),Object(u.jsxs)("select",{id:"countries",onChange:function(t){e.handleCurrentCountry(t.target.value)},children:[Object(u.jsx)("option",{value:"all",children:"All countries"}),o]})]})}),I=function(e){var t=Object(s.useState)(null),n=Object(a.a)(t,2),c=n[0],r=n[1],o=Object(s.useState)(null),i=Object(a.a)(o,2),l=i[0],d=i[1];Object(s.useEffect)((function(){console.log(l),e.handleSearchLocale({country:c,city:l})}),[c,l]);return Object(u.jsxs)("div",{className:"country-city-selector",children:[Object(u.jsx)(q,{handleCurrentCountry:function(e){"all"===e?(r(null),d(null)):(r(e),d(null))}}),c?Object(u.jsx)(L,{handleCurrentCity:function(e){d(e)},country:c}):null]})},E=(n(68),function(e){var t="grid-item "+e.className;return Object(u.jsx)("div",{className:t,children:e.children})}),B=n.p+"static/media/no_image.ced3df5f.jpg",H=(n(69),function(e){var t=e.story,n=e.editStoryUI;return Object(u.jsxs)(E,{className:"story-container",children:[n||null,Object(u.jsx)("img",{src:t.img||B,alt:"".concat(t.name," ").concat(t.surname)}),Object(u.jsxs)("div",{className:"story-text-container",children:[Object(u.jsxs)("h3",{children:[t.name," ",t.surname," (",t.age,", ",t.gender,")"]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"From: "}),t.from.city," (",t.from.country,")"]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Currently in: "}),t.currently_in.city," (",t.currently_in.country,")"]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Story: "}),t.interview.story]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Advice: "}),t.interview.advice]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Dream: "}),t.interview.dream]})]})]},t._id)}),J=(n(70),function(e){var t=e.results,n=t.map((function(e){if("false"!==e.approved)return Object(u.jsx)(H,{story:e},e._id)}));return t.length>0?Object(u.jsx)("div",{className:"results-container",children:n}):Object(u.jsx)("div",{className:"results-container",children:Object(u.jsxs)(E,{className:"something-went-wrong",children:[Object(u.jsx)("h3",{children:"Ops! Something went wrong :("}),Object(u.jsx)("p",{children:"Try refreshing the page. We're sorry for the inconvenience."})]})})}),Y=function(e){var t=Object(s.useState)({}),n=Object(a.a)(t,2),c=n[0],r=n[1],o=Object(s.useState)([]),i=Object(a.a)(o,2),l=i[0],d=i[1];Object(s.useEffect)((function(){var e;e=null==c.country?"/api/humans/":null==c.city||"all"==c.city?"/api/humans/".concat(c.country,"/all"):"/api/humans/".concat(c.country,"/").concat(c.city),fetch(e).then((function(e){return e.json()})).then((function(e){d(e.results)})).catch((function(e){console.log("An error occurred: "+e.message)}))}),[c]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(k,{linksToShow:[["Your profile","/profile"],["Add story","/add"],["Homepage","/"]],userPaneVisibility:e.showUserPane,toggleUserPaneVisibility:e.toggleUserPaneVisibility}),Object(u.jsxs)(T,{children:[Object(u.jsx)("h2",{children:"Read their stories"}),Object(u.jsx)("p",{children:"Choose a country and/or a city to start browsing their stories."}),Object(u.jsx)(I,{handleSearchLocale:function(e){r({city:e.city,country:e.country})}}),Object(u.jsx)(J,{results:l})]})]})},W=(n(71),n(40)),z=n.n(W);var G=function(e){return Object(u.jsx)(i.b,{to:e.to,children:Object(u.jsx)("div",{className:"".concat(z.a["standard-button"]," ").concat(e.className),children:e.text})})},K=n(19),R=n.p+"static/media/loading.166632e1.gif",Q=(n(72),function(){var e,t=Object(s.useState)((function(){fetch("/api/humans").then((function(e){return e.json()})).then((function(e){r(e.results.slice(0,4))})).catch((function(e){console.log("An error occurred: "+e.message)}))})),n=Object(a.a)(t,2),c=n[0],r=n[1];return e=c?c.map((function(e){return Object(u.jsxs)(K.a.Item,{children:[Object(u.jsx)("img",{className:"d-block w-100 carousel-img",src:e.img,alt:"First slide"}),Object(u.jsxs)(K.a.Caption,{className:"carousel-caption",children:[Object(u.jsx)("h3",{style:{color:"white"},children:"".concat(e.name," ").concat(e.surname," (").concat(e.age,")")}),Object(u.jsx)("p",{style:{fontSize:"1.2rem",textAlign:"center"},children:e.interview.advice})]})]},e._id)})):Object(u.jsxs)(K.a.Item,{children:[Object(u.jsx)("img",{className:"d-block w-100 carousel-img",src:R,alt:"Loading animation"}),Object(u.jsx)(K.a.Caption,{children:Object(u.jsx)("h3",{style:{color:"black"},children:"Loading..."})})]},"loading"),Object(u.jsx)(K.a,{indicators:!1,fade:!0,interval:4e3,className:"carousel-container",children:e})}),X=function(){return Object(u.jsx)(T,{children:Object(u.jsxs)("div",{className:"home-content__container",children:[Object(u.jsxs)("div",{className:"home-content",children:[Object(u.jsx)("h1",{className:"home-content__allcaps-header",children:"Humans of the Street"}),Object(u.jsx)("h2",{className:"home-content__white-header",children:"Read the stories of those who live on the street"}),Object(u.jsxs)("div",{className:"home-content__paragraph-text",children:[Object(u.jsx)("p",{children:"Join a community of volunteers dedicated to helping homeless people around the world."}),Object(u.jsx)("p",{children:"You can start making a difference right now."})]}),Object(u.jsx)(G,{to:"/browse/",text:"Start\xa0browsing"})]}),Object(u.jsx)(Q,{})]})})},Z=(n(73),function(e){return Object(u.jsxs)("nav",{className:"profile-nav",children:[Object(u.jsx)(i.b,{to:"/browse/",children:Object(u.jsx)("div",{children:"Browse stories"})}),Object(u.jsx)(i.b,{to:"/add/",children:Object(u.jsx)("div",{children:"Add new story"})}),Object(u.jsx)(i.b,{to:"/",onClick:e.logOutUser,children:Object(u.jsx)("div",{className:"accented-button",children:"Logout"})})]})}),$=n(21),ee=(n(74),function(e){return Object(u.jsx)("div",{className:"edit-story-UI",children:Object(u.jsx)("button",{onClick:function(){e.handleModalMessage("Do you really want to delete this element?"),e.handleStoryToDelete((function(t){var n=Object.assign({},t.storyToDelete);return n.id=e.id,{storyToDelete:n}}))},className:"delete-button"})})}),te=(n(75),function(e){var t,n=Object(s.useState)(sessionStorage.getItem("user")),c=Object(a.a)(n,2),r=c[0],o=(c[1],Object(s.useState)((function(){fetch("/api/humans/user/".concat(r)).then((function(e){return e.json()})).then((function(e){e.foundStories&&d(e.results)})).catch((function(e){console.log("An error occurred: "+e.message)}))}))),i=Object(a.a)(o,2),l=i[0],d=i[1];return Object(s.useEffect)((function(){if(e.storyToDelete.storyToDelete.delete){var t=l.filter((function(t){return t._id!==e.storyToDelete.storyToDelete.id}));console.log(t),d(t)}}),[e.storyToDelete.storyToDelete.delete]),l&&(t=l.map((function(t){return Object(u.jsx)(H,{story:t,editStoryUI:Object(u.jsx)(ee,Object($.a)({id:t._id,handleStoryToDelete:e.handleStoryToDelete,handleModalMessage:e.handleModalMessage},"handleStoryToDelete",e.handleStoryToDelete))},"story-".concat(t._id))}))),Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Your submitted stories"}),Object(u.jsx)("div",{className:"results-container",children:t})]})}),ne=n(25),se=n.n(ne),ce=n(34),re=n.n(ce),oe=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(M,{text:"Cancel",className:re.a["show-data-button"],onClick:e.onCancel}),Object(u.jsx)(M,{text:"Confirm",className:re.a["show-data-button"],onClick:e.onConfirm})]})},ae=function(){var e=Object(s.useState)(sessionStorage.getItem("user")),t=Object(a.a)(e,2),n=t[0],c=(t[1],Object(s.useState)((function(){fetch("/api/users/id/".concat(n)).then((function(e){return e.json()})).then((function(e){i({user:e.results})})).catch((function(e){console.log("An error occurred: "+e.message)}))}))),r=Object(a.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)(!0),d=Object(a.a)(l,2),j=d[0],b=d[1],h=Object(s.useState)(!1),m=Object(a.a)(h,2),O=m[0],x=m[1],f=Object(s.useState)(!1),g=Object(a.a)(f,2),p=g[0],y=g[1],v=Object(s.useState)(""),w=Object(a.a)(v,2),_=w[0],C=w[1],N=Object(s.useState)({newPasswordObj:{}}),P=Object(a.a)(N,2),k=P[0],T=P[1],F=function(e,t){T((function(n){var s=Object.assign(n.newPasswordObj);return s[t]=e.target.value.trim(),{newPasswordObj:s}}))},D=Object(u.jsxs)("div",{children:[Object(u.jsx)(M,{text:"Modify data",className:se.a["show-data-button"],onClick:function(){b(!1)}}),Object(u.jsx)(M,{text:"Modify password",className:se.a["show-data-button"],onClick:function(){y(!0)}})]}),U=Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"old-password",children:"Current password: "}),Object(u.jsx)("input",{type:"password",id:"old-password",value:k.newPasswordObj.currentPassword||"",onChange:function(e){return F(e,"currentPassword")}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"new-password",children:"New password: "}),Object(u.jsx)("input",{type:"password",id:"new-password",value:k.newPasswordObj.newPassword||"",onChange:function(e){return F(e,"newPassword")}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"confirm-new-password",children:"Confirm new password: "}),Object(u.jsx)("input",{type:"password",id:"confirm-new-password",value:k.newPasswordObj.confirmPassword||"",onChange:function(e){return F(e,"confirmPassword")}})]}),Object(u.jsx)(oe,{onCancel:function(){y(!1)},onConfirm:function(){console.log(o.user.email,k.newPasswordObj.currentPassword),fetch("/api/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:o.user.email,password:k.newPasswordObj.currentPassword})}).then((function(e){return e.json()})).then((function(e){return e.session?k.newPasswordObj.newPassword!==k.newPasswordObj.confirmPassword?(C("The two passwords don't match!"),x(!0),void T({newPasswordObj:{}})):(i((function(e){var t=Object.assign(e.user);return t.password=k.newPasswordObj.confirmPassword,{user:t}})),void fetch("/api/users/password",{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify({_id:o.user._id,password:o.user.password})}).then((function(e){return e.json()})).then((function(e){console.log(e),console.log(e),1===e.nModified?(x(!0),C("Personal details changed successfully!"),T({newPasswordObj:{}}),y(!1)):(x(!0),C("The was an issue with your request!"),T({newPasswordObj:{}}),y(!1))})).catch((function(e){console.log("An error occurred: "+e.message)}))):(C("The password you inserted is wrong!"),x(!0),void T({newPasswordObj:{}}))})).catch((function(e){console.log("An error occurred: "+e.message)}))}})]}),A=Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(u.jsx)("input",{type:"text",id:"name",placeholder:o?o.user.name:"Your name",value:o?o.user.name:"",onChange:function(e){i((function(t){var n=Object.assign(t.user);return n.name=e.target.value.trim(),{user:n}}))},disabled:j})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"surname",children:"Surname: "}),Object(u.jsx)("input",{type:"text",id:"surname",placeholder:o?o.user.surname:"Your name",value:o?o.user.surname:"",onChange:function(e){i((function(t){var n=Object.assign(t.user);return n.surname=e.target.value.trim(),{user:n}}))},disabled:j})]}),j?D:Object(u.jsx)(oe,{onCancel:function(){b(!0)},onConfirm:function(){fetch("/api/users/update/data",{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify({oldmail:o.user.email,email:o.user.email,name:o.user.name,surname:o.user.surname})}).then((function(e){return e.json()})).then((function(e){console.log(e),1===e.results.modifiedCount&&(x(!0),C("Personal details changed successfully!"))})).catch((function(e){console.log("An error occurred: "+e.message)})),b(!0)}})]});return Object(u.jsxs)(u.Fragment,{children:[O&&Object(u.jsx)(S,{onClick:function(){x(!1)},text:_}),Object(u.jsxs)("div",{className:se.a["personal-data-container"],children:[Object(u.jsx)("h3",{children:"Personal data"}),p?U:A]})]})},ie=n(27),le=n(28),ue=n(26),de=n.n(ue),je=function(e){var t=e.components.map((function(e,t){return Object(u.jsxs)(le.a,{children:[Object(u.jsx)(ie.a.Toggle,{as:le.a.Header,eventKey:"".concat(t),className:de.a["accordion-header"],children:Object(u.jsx)("h3",{className:de.a["accordion-title"],children:e.title})}),Object(u.jsx)(ie.a.Collapse,{eventKey:"".concat(t),children:Object(u.jsx)(le.a.Body,{children:Object(u.jsx)("section",{children:e.body})})})]},"card-".concat(t))}));return Object(u.jsx)("div",{className:de.a["accordion-container"],children:Object(u.jsx)(ie.a,{defaultActiveKey:"0",children:t})})},be=function(e){var t=[{title:"Navigation",body:Object(u.jsx)(Z,{handleSession:e.handleSession,logOutUser:e.logOutUser})},{title:"Edit user data",body:Object(u.jsx)(ae,{})},{title:"Edit submitted stories",body:Object(u.jsx)(te,{handleModalMessage:e.handleModalMessage,handleStoryToDelete:e.handleStoryToDelete,storyToDelete:e.storyToDelete})}];return Object(u.jsxs)(T,{children:[Object(u.jsx)("h2",{children:"Your profile"}),Object(u.jsx)(je,{components:t})]})},he=function(){var e=Object(s.useState)((function(){fetch("/api/login/check").then((function(e){return e.json()})).then((function(e){console.log("Session is ",e.isLogged),c(e.isLogged),fetch("/api/users/email",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:e.user})}).then((function(e){return e.json()})).then((function(e){e.userFound&&sessionStorage.setItem("user",e.results._id)})).catch((function(e){console.log("An error occurred: "+e.message)}))})).catch((function(e){console.log("An error occurred: "+e.message)}))})),t=Object(a.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(!1),o=Object(a.a)(r,2),j=o[0],b=o[1],h=Object(s.useState)(!1),O=Object(a.a)(h,2),x=O[0],f=O[1],p=Object(s.useState)(null),y=Object(a.a)(p,2),v=y[0],w=y[1],_=Object(s.useState)({storyToDelete:{id:"",delete:!1}}),C=Object(a.a)(_,2),k=C[0],T=C[1],F=Object(s.useState)(!1),D=Object(a.a)(F,2),M=D[0],U=D[1],A=function(e){c(e)};Object(s.useEffect)((function(){n||sessionStorage.removeItem("user")}),[n]);var L=function(){b(!j),x&&f(!1)},q=function(e){w(e)},I=function(e){T(e)};Object(s.useEffect)((function(){k.storyToDelete.id&&k.storyToDelete.delete&&fetch("/api/humans/".concat(k.storyToDelete.id),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){e.deletedCount>0&&T({storyToDelete:{id:"",delete:!1}})})).catch((function(e){console.log("An error occurred: "+e.message)}))}),[k]);var E=function(){U(!M)};return console.log(S),Object(u.jsxs)(i.a,{children:[Object(u.jsxs)(l.d,{children:[Object(u.jsxs)(l.b,{exact:!0,path:"/",children:[v?Object(u.jsx)(S,{onClick:q,text:v}):null,Object(u.jsx)(m,{session:n,toggleLoginFormVisibility:L,handleModalMessage:q}),j?Object(u.jsx)(N,{onLogin:A,toggleSignupFormVisibility:function(){f(!x),b(!j)},toggleLoginFormVisibility:L,handleModalMessage:q}):null,x?Object(u.jsx)(P,{}):null,Object(u.jsx)(X,{})]}),Object(u.jsxs)(l.b,{exact:!0,path:"/browse",children:[Object(u.jsx)(g,{session:n,toggleUserPaneVisibility:E}),Object(u.jsx)(Y,{showUserPane:M,toggleUserPaneVisibility:E})]}),n?Object(u.jsxs)(l.b,{exact:!0,path:"/profile",children:[v?Object(u.jsx)(S,{onClick:q,text:v,cancelButton:!0,handleStoryToDelete:I}):null,Object(u.jsx)(g,{}),Object(u.jsx)(be,{session:n,handleModalMessage:q,handleStoryToDelete:I,handleSession:A,storyToDelete:k,logOutUser:function(){fetch("/api/logout",{headers:{"Content-Type":"application/json"},method:"PUT"}).then((function(e){return e.json()})).then((function(e){e.loggedOut?A(!1):q("It wasn't possible to log you out!")})).catch((function(e){console.log("An error occurred: "+e.message)}))}})]}):Object(u.jsx)(l.a,{to:"/"}),Object(u.jsxs)(l.b,{path:"/add",children:[Object(u.jsx)(g,{session:n,toggleUserPaneVisibility:E}),Object(u.jsx)(V,{showUserPane:M,toggleUserPaneVisibility:E})]})]}),Object(u.jsx)(d,{})]})};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(he,{})}),document.getElementById("root"))}],[[76,1,2]]]);
//# sourceMappingURL=main.6657d3e7.chunk.js.map